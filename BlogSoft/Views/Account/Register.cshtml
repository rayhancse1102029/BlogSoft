

@model RegisterViewModel

@{
    Layout = "_LayoutForUser";
}

<style>
    #brand-icon-id i {
        height: 200px;
        width: 100px
    }

    #register-image {
        background: url(/images/register_page_sidebar.jpg);
        background-position: center;
        background-size: cover;

    }
</style>

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Register</title>

    @*<link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">*@
    <link href="~/FontAwsome/css/all.min.css" rel="stylesheet" />
    <link href="~/css/sb-admin-2.min.css" rel="stylesheet" />

</head>

<body>
    <div style="width: 100%; height: 100%;text-align: center; display: none" id="loader_div_id">
        <img src="~/images/loader_02.gif" style="height: 500px; width: 700px; margin-left: auto" />
    </div>
    <div class="container" id="body_div_id">
        <div class="card o-hidden border-0 shadow-lg my-5">
            <div class="card-body p-0">
                <!-- Nested Row within Card Body -->
                <div class="row">
                    <div class="col-lg-5 d-none d-lg-block" id="register-image"></div>
                    <div class="col-lg-7">
                        <div class="p-5">
                            <div class="text-center">
                                <h1 class="h4 text-gray-900 mb-4 font-weight-bold" style="margin-top: -20px">Create New Account!</h1>
                            </div>
                            <hr/>
                            <form id="regForm" class="user"  method="post" enctype="multipart/form-data">
                                <div class="form-group row">
                                    <div class="col-sm-6 mb-3 mb-sm-0">
                                        <input type="text" name="firstName" class="form-control" id="firstName" placeholder="First Name"  style="border-radius: 25px;" required="required">
                                    </div>
                                    <div class="col-sm-6">
                                        <input type="text" name="lastName" class="form-control" id="lastName" placeholder="Last Name"  style="border-radius: 25px;" required="required">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <div class="col-sm-6 mb-3 mb-sm-0">
                                        <input type="text" name="phone" class="form-control" id="phone" placeholder="Phone number" style="border-radius: 25px;" required="required">
                                    </div>
                                    <div class="col-sm-6">
                                        <select name="genderId" class="form-control" id="genderId"  style="border-radius: 25px;" required="required">
                                            <option value="0">  select gender </option>
                                            @foreach (var gender in Model.genders)
                                            {
                                                <option value="@gender.Id"> @gender.name </option>
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <input type="file" name="img" class="form-control" id="img"  style="border-radius: 25px;" required="required">
                                </div> 
                                <div class="form-group">
                                    <input type="email" name="Email" class="form-control" id="Email" placeholder="Email Address"  style="border-radius: 25px;" required="required">
                                </div>
                                <div class="form-group row">
                                    <div class="col-sm-6 mb-3 mb-sm-0">
                                        <input onkeyup="passValidationFun()" type="password" name="Password" class="form-control" id="Password" placeholder="Password"  style="border-radius: 25px;" required="required">
                                        <span class="password_validation_cls" style="color: red; display: none">possword and confirm password does not matched</span>
                                    </div>
                                    <div class="col-sm-6">
                                        <input onkeyup="passValidationFun()"  type="password" name="ConfirmPassword" class="form-control" id="ConfirmPassword" placeholder="Repeat Password"  style="border-radius: 25px;" required="required">
                                        <span class="password_validation_cls" style="color: red; display: none">possword and confirm password does not matched</span>
                                    </div>
                                </div>
                                <button type="button" onclick="submitFun()" class="btn btn-success btn-user btn-block">Register Account</button>

                                <hr>
                            </form>
                            <div class="text-center">
                                <a class="small" href="forgot-password.html">Forgot Password?</a>
                            </div>
                            <div class="text-center">
                                <a class="small" asp-controller="Account" asp-action="Login">Already have an account? Login!</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script type="text/javascript">

        function handleClick(cb) {
            if (cb.checked == true) {
                $('#customCheck').val(true);
            } else {
                $('#customCheck').val(false);
            }
        }

        function passValidationFun() {
            console.log("password fun");

            var Password = $("#Password").val();
            var ConfirmPassword = $("#ConfirmPassword").val();

            if (Password == ConfirmPassword) {
                //console.log(true);
                $(".password_validation_cls").css('display', 'none');
            } else {
                //console.log(false);
                $(".password_validation_cls").css('display', 'block');
            }

        }

        function submitFun() {

            var firstName = $("#firstName").val();
            var lastName = $("#lastName").val();
            var phone = $("#phone").val();
            var genderId = $("#genderId").val();
            var img = $("#img").val();
            var Email = $("#Email").val();
            var Password = $("#Password").val();
            var ConfirmPassword = $("#ConfirmPassword").val();

            if (firstName == null || firstName == '') {
                swal({
                    title: 'Invalid Input', text: 'Please enter first name!', type: 'warning', confirmButtonColor: '#3085d6', confirmButtonText: 'OK!'
                });
                return false;
            }
            else if (lastName == null || lastName == '') {
                swal({
                    title: 'Invalid Input', text: 'Please enter last name!', type: 'warning', confirmButtonColor: '#3085d6', confirmButtonText: 'OK!'
                });
                return false;
            }
            else if (phone == null || phone == '') {
                swal({
                    title: 'Invalid Input', text: 'Please phone number', type: 'warning', confirmButtonColor: '#3085d6', confirmButtonText: 'OK!'
                });
                return false;
            }
            else if (genderId <= 0) {
                swal({
                    title: 'Invalid Input', text: 'Please select your gender!', type: 'warning', confirmButtonColor: '#3085d6', confirmButtonText: 'OK!'
                });
                return false;
            }
            else if (img == null || img == '') {
                swal({
                    title: 'Invalid Input', text: 'Please choose your profile image!', type: 'warning', confirmButtonColor: '#3085d6', confirmButtonText: 'OK!'
                });
                return false;
            }
            else if (Email == null || Email == '') {
                swal({
                    title: 'Invalid Input', text: 'Please enter your email address!', type: 'warning', confirmButtonColor: '#3085d6', confirmButtonText: 'OK!'
                });
                return false;
            }
            else if (Password == null || Password == '') {
                swal({
                    title: 'Invalid Input', text: 'Please enter a valid password!', type: 'warning', confirmButtonColor: '#3085d6', confirmButtonText: 'OK!'
                });
                return false;
            }
            else if (Password != ConfirmPassword) {

                swal({
                    title: 'Invalid Input',
                    text: 'Password and confirm password does not matched!',
                    type: 'warning',
                    confirmButtonColor: '#3085d6',
                    confirmButtonText: 'OK!'
                });
                return false;
            } else {

                $("#loader_div_id").css('display', 'block');
                $("#body_div_id").css('display', 'none');
                var form = $('#regForm')[0];
                var data = new FormData(form);

                swal({
                    title: 'Are you sure?', text: 'Do you want to create a new account!', type: 'warning', showCancelButton: true, confirmButtonColor: '#3085d6', cancelButtonColor: '#d33', confirmButtonText: 'Yes, Save it!'
                }).then(function () {

                    $.ajax({
                        url: "/Account/Register",
                        type: "post",
                        data: data,
                        enctype: 'multipart/form-data',
                        contentType: false,
                        cache: false,
                        processData: false,
                        success: function (response) {
                            $("#loader_div_id").css('display', 'none');
                            if (response == "success") {
                                swal({
                                    title: 'Success!', text: 'Account Create Successfully!', type: 'success', showCancelButton: false, confirmButtonColor: '#3085d6', confirmButtonText: 'Ok!'
                                }).then(function () {
                                    window.location.href = "/Account/RegistrationSuccessMsg";
                                });

                            }
                            else if (response == "exists") {
                                    swal({
                                        title: 'Invalid Input',
                                        text: 'User Already Exists!',
                                        type: 'warning',
                                        confirmButtonColor: '#3085d6',
                                        confirmButtonText: 'OK!'
                                    }).then(function () {
                                        location.reload();
                                    });
                                
                            }
                            else
                            {
                                $("#body_div_id").css('display', 'block');
                                swal('Warning!', 'Unable to save!', 'warning');
                            }

                        }
                    });
                });

            }


        }


    </script>


    <script src="~/vendor/jquery/jquery.min.js"></script>
    <script src="~/vendor/jquery-easing/jquery.easing.min.js"></script>
    <script src="~/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/sb-admin-2.min.js"></script>

</body>
</html>

